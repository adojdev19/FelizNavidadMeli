<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tarjeta de regalo</title>
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Pasteles morados/violetas */
      --bg1:#fbf7ff;
      --bg2:#f3efff;
      --lav:#efe6ff;
      --lilac:#e7dbff;
      --violet:#cdb7ff;
      --violet2:#b79bff;

      --ink:#2b2233;
      --muted:rgba(43,34,51,.62);
      --shadow:rgba(0,0,0,.14);

      --paper:#fffafc;
      --paper2:#fff;
      --paperLine:rgba(0,0,0,.04);
    }

    *{box-sizing:border-box;}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:28px 16px;
      font-family:'Patrick Hand',cursive;
      color:var(--ink);
      background:
        radial-gradient(900px 450px at 15% 10%, rgba(183,155,255,.22), transparent 60%),
        radial-gradient(900px 450px at 85% 0%, rgba(205,183,255,.22), transparent 60%),
        linear-gradient(180deg,var(--bg1),var(--bg2));
    }

    .wrap{
      width:min(860px,100%);
      text-align:center;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:14px;
    }

    .hint{
      margin:0;
      font-size:18px;
      color:var(--muted);
    }

    /* --- SOBRE --- */
    .envelope{
      width:min(720px,100%);
      aspect-ratio: 16 / 10;
      position:relative;
      cursor:pointer;
      user-select:none;
      transform: translateZ(0);
      outline:none;
    }

    .env-body{
      position:absolute;
      inset:0;
      border-radius:24px;
      background: linear-gradient(145deg, var(--lav), var(--lilac));
      box-shadow: 0 26px 70px var(--shadow);
      border:1px solid rgba(43,34,51,.10);
      overflow:hidden;
    }

    .env-body::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(700px 240px at 50% 110%, rgba(0,0,0,.08), transparent 55%);
      pointer-events:none;
    }

    /* Tri√°ngulos del sobre (frente) */
    .tri-left{
      position:absolute;
      left:-2px; bottom:-2px;
      width:68%;
      height:72%;
      background: linear-gradient(135deg, rgba(205,183,255,.85), rgba(239,230,255,.55));
      clip-path: polygon(0 100%, 0 0, 100% 100%);
    }
    .tri-right{
      position:absolute;
      right:-2px; bottom:-2px;
      width:68%;
      height:72%;
      background: linear-gradient(225deg, rgba(183,155,255,.80), rgba(239,230,255,.55));
      clip-path: polygon(100% 100%, 0 100%, 100% 0);
    }
    .tri-bottom{
      position:absolute;
      left:-2px; right:-2px; bottom:-2px;
      height:70%;
      background: linear-gradient(180deg, rgba(231,219,255,.65), rgba(239,230,255,.25));
      clip-path: polygon(0 100%, 50% 35%, 100% 100%);
    }

    /* Tapa superior (se abre, estilo sobre) */
    .flap{
      position:absolute;
      left:-2px; right:-2px;
      top:-2px;
      height:65%;
      background: linear-gradient(180deg, rgba(183,155,255,.85), rgba(231,219,255,.75));
      clip-path: polygon(0 0, 100% 0, 50% 80%);
      transform-origin: 50% 0%;
      transform: rotateX(0deg);
      transition: transform 900ms cubic-bezier(.2,.9,.2,1);
      box-shadow: 0 10px 22px rgba(0,0,0,.08);
      z-index: 6;
      backface-visibility:hidden;
    }

    /* Texto frontal */
    .front-text{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      padding:18px;
      z-index:4;
      pointer-events:none;
      transition: opacity 220ms ease;
    }
    .front-text .title{
      margin:0;
      font-size:44px;
      letter-spacing:.2px;
      text-shadow: 0 2px 0 rgba(255,255,255,.55);
    }
    .front-text .sub{
      margin:8px 0 0 0;
      font-size:18px;
      color:var(--muted);
    }

    /* --- CARTA (papel desdobl√°ndose) --- */
   .letter{
  position:absolute;
  left:50%;
  top:50%;
  width:86%;
  height:86%;
  border-radius:18px;
  border:1px solid rgba(43,34,51,.10);
  box-shadow: 0 18px 40px rgba(0,0,0,.10);
  background: linear-gradient(180deg, var(--paper), var(--paper2));
  z-index:2;

  /* Importante: que no se recorte el despliegue */
  overflow: visible;

  /* cerrada */
  opacity:0;
  transform: translate(-50%, -50%) translateY(70px) scale(.98);
  pointer-events:none;
}

    /* ‚ÄúPliegue‚Äù visual del papel */
    .letter::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        linear-gradient(to bottom,
          transparent 0%,
          transparent 49.5%,
          rgba(0,0,0,.06) 50%,
          transparent 50.8%,
          transparent 100%);
      opacity:.25;
      pointer-events:none;
    }

    /* contenedor que se desdobla en 2 fases */
    .fold{
      position:absolute;
      inset:0;
      transform-origin: 50% 0%;
      transform: rotateX(-92deg) scaleY(.06);
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.12));
    }

    /* segunda ‚Äúmitad‚Äù del papel (simula doblez) */
    .fold .fold2{
      position:absolute;
      inset:0;
      transform-origin: 50% 50%;
      transform: rotateX(92deg);
    }

.letter-inner{
  height:100%;
  padding:26px 24px;
  display:grid;
  place-items:center;
  overflow:auto;              /* <- clave */
  border-radius:18px;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(0,0,0,0.00),
      rgba(0,0,0,0.00) 26px,
      var(--paperLine) 27px
    );
}

    .poem{
      margin:0;
      text-align:center;
      font-size:22px;
      line-height:1.5;
      white-space:pre-wrap;
    }

    .actions{
      margin-top:14px;
      display:flex;
      justify-content:center;
    }

    .btn{
      border:none;
      background: rgba(183,155,255,.22);
      color: var(--ink);
      font-family:inherit;
      font-size:18px;
      padding:8px 14px;
      border-radius:14px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease;
    }
    .btn:hover{ background: rgba(183,155,255,.30); }
    .btn:active{ transform: scale(.98); }

    /* --- ESTADO ABIERTO --- */
    .envelope.open .flap{
      transform: rotateX(180deg);
    }
    .envelope.open .front-text{
      opacity:0;
    }

.envelope.open .letter{
  opacity:1;
  pointer-events:auto;
  transform: translate(-50%, -50%) scale(1);
  transition: transform 700ms cubic-bezier(.2,.9,.2,1), opacity 240ms ease;
}


    /* Animaci√≥n ‚Äúpapel desdobl√°ndose‚Äù: dos fases */
    .envelope.open .fold{
      animation: unfold1 900ms cubic-bezier(.2,.9,.2,1) forwards;
    }
    .envelope.open .fold .fold2{
      animation: unfold2 900ms cubic-bezier(.2,.9,.2,1) forwards;
      animation-delay: 160ms;
    }

    @keyframes unfold1{
      0%   { transform: rotateX(-92deg) scaleY(.06); }
      55%  { transform: rotateX(0deg)   scaleY(.55); }
      100% { transform: rotateX(0deg)   scaleY(1); }
    }

    @keyframes unfold2{
      0%   { transform: rotateX(92deg); }
      60%  { transform: rotateX(0deg); }
      100% { transform: rotateX(0deg); }
    }

    /* Cierre: vuelve a doblarse */
    .envelope.closing .fold{
      animation: foldBack1 520ms cubic-bezier(.4,0,.2,1) forwards;
    }
    .envelope.closing .fold .fold2{
      animation: foldBack2 520ms cubic-bezier(.4,0,.2,1) forwards;
    }
    @keyframes foldBack1{
      0%   { transform: rotateX(0deg) scaleY(1); }
      100% { transform: rotateX(-92deg) scaleY(.06); }
    }
    @keyframes foldBack2{
      0%   { transform: rotateX(0deg); }
      100% { transform: rotateX(92deg); }
    }

    @media (prefers-reduced-motion: reduce){
      .flap{ transition:none; }
      .envelope.open .fold, .envelope.open .fold .fold2,
      .envelope.closing .fold, .envelope.closing .fold .fold2{
        animation:none;
      }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <p class="hint">Haz click en el sobre para abrir la carta</p>

    <div class="envelope" id="envelope" role="button" tabindex="0" aria-label="Abrir tarjeta">
      <div class="env-body">
        <div class="front-text">
          <div>
            <h1 class="title">Feliz Navidad üéÑ</h1>
            <p class="sub">Click para ver el mensaje</p>
          </div>
        </div>

        <div class="tri-left"></div>
        <div class="tri-right"></div>
        <div class="tri-bottom"></div>

        <div class="flap"></div>

        <div class="letter" id="letter">
          <div class="fold">
            <div class="fold2">
              <div class="letter-inner">
                <div>
                  <p class="poem">Para Marie

Mucho m√°s especial de lo que crees,
muchas gracias por ser como eres.
Porque m√∫sica tu voz puede ser,
me alegra siempre poderte ver.

Me reservo enumerar tus virtudes,
porque s√© que eso te suele incomodar,
pero no me corto al poder expresar
cu√°n especial e importante t√∫ eres.

Por eso me detendr√© y solo dir√©:
gracias, eres realmente muy especial.
Deseo que tengas solo felicidad,
gracias por ser siempre como eres, tal cual.

Feliz navidad :)</p>

                  <div class="actions">
                    <button class="btn" id="closeBtn" type="button">Cerrar</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    const envelope = document.getElementById("envelope");
    const closeBtn = document.getElementById("closeBtn");

    function openEnv(){
      envelope.classList.remove("closing");
      envelope.classList.add("open");
    }

    function closeEnv(){
      // anima el ‚Äúdoblado‚Äù antes de ocultar
      envelope.classList.add("closing");
      setTimeout(() => {
        envelope.classList.remove("open");
        envelope.classList.remove("closing");
      }, 520);
    }

    envelope.addEventListener("click", (e) => {
      if (e.target && e.target.id === "closeBtn") return;
      openEnv();
    });

    closeBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      closeEnv();
    });

    envelope.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        openEnv();
      }
      if (e.key === "Escape") closeEnv();
    });
  </script>
</body>
</html>
